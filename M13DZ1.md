```mermaid              
graph LR
    %% СТИЛИ
    classDef actorStyle fill:#fff,stroke:#000,stroke-width:2px,color:#000;
    classDef usecaseStyle fill:#f9f9f9,stroke:#333,stroke-width:1px,rx:10,ry:10,color:#000;

    %% --- АКТОРЫ ---
    User_Reader((Читатель)):::actorStyle
    User_Librarian((Библиотекарь)):::actorStyle
    User_Admin((Администратор)):::actorStyle

    %% НАСЛЕДОВАНИЕ (Заменено на обычный пунктир для надежности)
    User_Librarian -.-> User_Reader
    User_Admin -.-> User_Reader

    %% --- СИСТЕМА ---
    subgraph System [Система Управления Сетью Библиотек]
        direction TB
        
        %% Базовые функции
        UC_Login([Регистрация / Вход]):::usecaseStyle
        UC_View([Просмотр каталога]):::usecaseStyle
        UC_Search([Поиск книг]):::usecaseStyle
        UC_Reserve([Бронирование книги]):::usecaseStyle
        UC_History([Просмотр истории]):::usecaseStyle
        UC_Cancel([Отмена бронирования]):::usecaseStyle

        %% Функции персонала
        UC_ManageBooks([Управление книгами]):::usecaseStyle
        UC_IssueReturn([Выдача и Возврат]):::usecaseStyle
        UC_ManageCatalog([Управление каталогом]):::usecaseStyle

        %% Функции Админа
        UC_Branches([Управление филиалами]):::usecaseStyle
        UC_ManageUsers([Управление пользователями]):::usecaseStyle
        UC_Analytics([Просмотр аналитики]):::usecaseStyle
    end

    %% --- СВЯЗИ ---

    %% Читатель
    User_Reader --- UC_Login
    User_Reader --- UC_View
    User_Reader --- UC_History
    User_Reader --- UC_Reserve

    %% Зависимости (include / extend)
    UC_Reserve -.->|include| UC_Login
    UC_Reserve -.->|include| UC_View
    UC_Search -.->|extend| UC_View
    UC_Cancel -.->|extend| UC_History

    %% Библиотекарь
    User_Librarian --- UC_ManageBooks
    User_Librarian --- UC_IssueReturn
    User_Librarian --- UC_ManageCatalog

    %% Администратор
    User_Admin --- UC_Branches
    User_Admin --- UC_ManageUsers
    User_Admin --- UC_Analytics
```


 Иерархия акторов (Наследование): На диаграмме использована стрелка с пустым треугольником (<|--), указывающая на родителя.
Читатель — базовый актер.
Библиотекарь и Администратор наследуются от Читателя. Это означает, что сотрудник библиотеки или админ тоже могут искать книги и просматривать каталог как обычные пользователи, но имеют дополнительные права.



Типы связей:
<<include>> (Включение):
Пример: Бронирование книги ..> Вход в систему
Логика: Невозможно забронировать книгу, если система не знает, кто вы. Процесс бронирования всегда включает в себя идентификацию пользователя.

<<extend>> (Расширение):
Пример: Поиск книг ..> Просмотр каталога.
 Пользователь может просто листать каталог (базовый сценарий). Использование строки поиска — это опциональное расширение этого процесса, оно происходит не всегда.
Пример: Отмена бронирования ..> Просмотр истории. Отмена происходит только в контексте просмотра списка своих активных заявок.
